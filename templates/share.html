{% extends "_base.html" %}
{% block title %}Share Color Schemes{% endblock %}

{% block body %}
    <h1>Upload Color Schemes</h1>
    <noscript>
        <p>We'd love to have you share your color schemes but it seems Javascript isn't enabled.  You'll need to it back on in order to use the share feature.</p>
    </noscript>

    <div id="upload" style="display:none;">
        <p>Choose the schemes you'd like to upload. &nbsp;<span class="highlight">Multi-select</span> and <span class="highlight">Drag-and-Drop</span> supported by quality browsers.<p>
            <h2>Common Color Scheme Locations</h2>
            <table class="common-locations">
                <tr>
                    <td class="os">Windows Vista &amp; 7</td>
                    <td>C:\Users\&lt;Your Username&gt;\AppData\Local\KomodoEdit\&lt;version&gt;\schemes</td>
                </tr>
                <tr>
                    <td class="os">Windows XP</td>
                    <td>C:\Document and Settings\&lt;Your Username&gt;\AppData\Local\KomodoEdit\&lt;version&gt;\schemes</td>
                </tr>
                <tr>
                    <td class="os">Ubuntu / Linux</td>
                    <td>~/.komodoedit/&lt;version&gt;/schemes</td>
                </tr>
                <tr>
                    <td class="os">Mac OSX</td>
                    <td>(someone email me and let me know)</td>
                </tr>
            </table>
        </p>
        <fieldset class="agreement">
            <input type="checkbox" id="agreement"><label for="agreement">I certify that I have permission to upload the following files and agree to release them under the Creative Commons license for others to freely used without compensation to myself.</label>
        </fieldset>
        <div id="file-uploader"></div>
    </div>

    <div id="active" style="display:none;">
    </div>
    &nbsp;
{% endblock %}

{% block head %}<link type="text/css" rel="stylesheet" href="/static/js/fileuploader/fileuploader.css" />{% endblock %}
{% block script %}
<script type="text/javascript" src="/static/js/fileuploader/fileuploader.js"></script>
<script type="text/javascript">
    // Stored temporarily here while in development, move to external file once it's more stabalized
    google.setOnLoadCallback(function() {
      $(function() {
            Share.initUploader();
      });
    });
    var Share = function() {
        return {
            initUploader: function() {
            $('#upload').show();
                var uploader = new qq.FileUploader({
                    element: $('#file-uploader')[0],
                    action: '/share/upload',
                    //allowedExtensions: ['ksf'],
                    onSubmit: function(id, filename) {
                        if ($('#agreement').attr('checked')) {
                            return true;
                        }
                        alert('You must agree to the terms of upload first.');
                        return false;
                    },
                    onComplete: function(id, filename, responseJSON) {
                        //alert('complete');
                    },
                    showMessage: function(message) {
                        alert(message);
                    }
                });
            }
        }
    }();
</script>
{% endblock %}